<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Inst√§llningar | Admin - NorthWind Scatters</title>
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    .settings-card {
      background: var(--color-white);
      border-radius: var(--radius-lg);
      padding: var(--space-6);
      box-shadow: var(--shadow-md);
      margin-bottom: var(--space-6);
    }
    
    .settings-title {
      font-size: var(--text-xl);
      margin-bottom: var(--space-4);
      padding-bottom: var(--space-3);
      border-bottom: 1px solid rgba(0,0,0,0.1);
    }
    
    .form-hint {
      font-size: var(--text-sm);
      color: var(--color-text-muted);
      margin-top: var(--space-1);
    }
    
    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-4);
    }
    
    @media (max-width: 640px) {
      .form-row {
        grid-template-columns: 1fr;
      }
    }
    
    .switch-container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: var(--space-3) 0;
      border-bottom: 1px solid rgba(0,0,0,0.05);
    }
    
    .switch-label {
      font-size: var(--text-base);
    }
    
    .switch-description {
      font-size: var(--text-sm);
      color: var(--color-text-muted);
      margin-top: var(--space-1);
    }
    
    .switch {
      position: relative;
      width: 50px;
      height: 28px;
      flex-shrink: 0;
    }
    
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 28px;
    }
    
    .slider:before {
      position: absolute;
      content: "";
      height: 20px;
      width: 20px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }
    
    input:checked + .slider {
      background-color: var(--color-primary);
    }
    
    input:checked + .slider:before {
      transform: translateX(22px);
    }
  </style>
</head>
<body data-page="settings">
  
  <div class="admin-layout">
    
    <!-- Sidebar -->
    <aside class="admin-sidebar">
      <div class="admin-brand">
        <div class="admin-brand-icon">N</div>
        <span class="admin-brand-text">NorthWind</span>
      </div>
      
      <nav>
        <ul class="admin-nav">
          <li class="admin-nav-item">
            <a href="admin-dashboard.html" class="admin-nav-link">
              üìä Dashboard
            </a>
          </li>
          <li class="admin-nav-item">
            <a href="admin-kittens.html" class="admin-nav-link">
              üê± Kattungar
            </a>
          </li>
          <li class="admin-nav-item">
            <a href="admin-cats.html" class="admin-nav-link">
              üêæ Mina katter
            </a>
          </li>
          <li class="admin-nav-item">
            <a href="admin-news.html" class="admin-nav-link">
              üì∞ Nyheter
            </a>
          </li>
          <li class="admin-nav-item">
            <a href="admin-hero.html" class="admin-nav-link">
              üñºÔ∏è Hero bild
            </a>
          </li>
          <li class="admin-nav-item">
            <a href="admin-settings.html" class="admin-nav-link active">
              ‚öôÔ∏è Inst√§llningar
            </a>
          </li>
          <li class="admin-nav-item" style="margin-top: var(--space-8);">
            <a href="index.html" class="admin-nav-link">
              üåê Visa sida
            </a>
          </li>
          <li class="admin-nav-item">
            <a href="admin-login.html" class="admin-nav-link">
              üö™ Logga ut
            </a>
          </li>
        </ul>
      </nav>
    </aside>
    
    <!-- Content -->
    <main class="admin-content">
      
      <div class="admin-header">
        <h1 class="admin-title">Inst√§llningar</h1>
      </div>
      
      <form id="settings-form" onsubmit="Admin.saveSettings(event)">
        
        <!-- General Settings -->
        <div class="settings-card">
          <h2 class="settings-title">Allm√§nna inst√§llningar</h2>
          
          <div class="form-group">
            <label class="form-label">Uppf√∂dningsnamn</label>
            <input type="text" name="kennel_name" class="form-input" value="NorthWind Scatters">
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">E-post</label>
              <input type="email" name="contact_email" class="form-input" value="info@northwindscatters.se">
            </div>
            
            <div class="form-group">
              <label class="form-label">Telefon</label>
              <input type="tel" name="contact_phone" class="form-input" value="+46 70 123 45 67">
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label">Plats</label>
            <input type="text" name="contact_address" class="form-input" value="Stockholm, Sverige">
            <p class="form-hint">Visas p√• kontaktsidan och i footer</p>
          </div>
          
          <div class="form-group">
            <label class="form-label">Beskrivning (kort)</label>
            <textarea name="kennel_description" class="form-textarea">Norsk Skogskatt uppf√∂dning med k√§rlek och omsorg. Vi √§r en liten hemuppf√∂dning bel√§gen i Sverige som fokuserar p√• h√§lsa, temperament och rasstandard.</textarea>
            <p class="form-hint">Anv√§nds i footer och meta-beskrivningar</p>
          </div>
        </div>
        
        <!-- Hero Settings -->
        <div class="settings-card">
          <h2 class="settings-title">Hero-sektion (startsida)</h2>
          
          <div class="form-group">
            <label class="form-label">Hero titel</label>
            <input type="text" name="hero_title" class="form-input" value="NorthWind Scatters">
          </div>
          
          <div class="form-group">
            <label class="form-label">Hero undertext</label>
            <textarea name="hero_subtitle" class="form-textarea">Norsk Skogskatt uppf√∂dning med k√§rlek och omsorg i Sverige. V√•ra katter √§r v√•r familj.</textarea>
          </div>
          
          <div class="form-group">
            <label class="form-label">Hero bild URL</label>
            <input type="url" name="hero_image_url" class="form-input" value="https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=1920&q=80">
            <p class="form-hint">URL till stor bild f√∂r hero-sektionen (1920x1080 rekommenderat)</p>
          </div>
        </div>
        
        <!-- Social Media -->
        <div class="settings-card">
          <h2 class="settings-title">Sociala medier</h2>
          
          <div class="form-group">
            <label class="form-label">Facebook URL</label>
            <input type="url" name="facebook_url" class="form-input" placeholder="https://facebook.com/northwindscatters">
          </div>
          
          <div class="form-group">
            <label class="form-label">Instagram URL</label>
            <input type="url" name="instagram_url" class="form-input" placeholder="https://instagram.com/northwindscatters">
          </div>
        </div>
        
        <!-- Save Button -->
        <div style="display: flex; gap: var(--space-3);">
          <button type="submit" class="btn btn-primary">Spara inst√§llningar</button>
          <button type="button" class="btn btn-outline" onclick="if(confirm('√Ñr du s√§ker? Detta √•terst√§ller alla inst√§llningar till standard.')) { Admin.resetSettings(); }">√Öterst√§ll standard</button>
        </div>
        
      </form>
      
    </main>
    
  </div>

  <script src="admin.js"></script>
  <script>
    // Add reset settings function
    window.resetSettings = async function() {
      if (!confirm('√Ñr du s√§ker p√• att du vill √•terst√§lla alla inst√§llningar?')) {
        return;
      }
      
      try {
        const defaultSettings = {
          kennel_name: 'NorthWind Scatters',
          contact_email: 'info@northwindscatters.se',
          contact_phone: '+46 70 123 45 67',
          contact_address: 'Stockholm, Sverige',
          kennel_description: 'Norsk Skogskatt uppf√∂dning med k√§rlek och omsorg.',
          hero_title: 'NorthWind Scatters',
          hero_subtitle: 'Norsk Skogskatt uppf√∂dning med k√§rlek och omsorg i Sverige.',
          hero_image_url: 'https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=1920&q=80',
          facebook_url: '',
          instagram_url: '',
        };
        
        for (const [key, value] of Object.entries(defaultSettings)) {
          await supabaseClient
            .from('settings')
            .upsert({ key, value }, { onConflict: 'key' });
        }
        
        alert('Inst√§llningar √•terst√§llda!');
        location.reload();
        
      } catch (error) {
        console.error('Error resetting settings:', error);
        alert('Kunde inte √•terst√§lla: ' + error.message);
      }
    };
  </script>
</body>
</html>
